<!DOCTYPE html>
<html>
  <head>
    <title>Live Transpiler</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- <link href="css/bootstrap-theme.min.css" rel="stylesheet"> -->
    <script src="Ast.js?4"></script>
    <style type="text/css">
      .centerYoText
      {
        text-align:center;
        color:#EFEFEF;
      }
      .editor
      {
        width: 100%;
        height: 480px;
        border-radius:4px;
        border-color:#777777;
        border-width:2px;
        border-style:solid;
      }
    </style>
  </head>
  <body style="background:linear-gradient(to bottom, #333333, #222222);height:100%;background-repeat:no-repeat;background-attachment: fixed;">
  <!-- <body> -->
    <div class="row" style="padding:.5em;">
      <h4 class="centerYoText">Type or paste in Java on the left and it'll be transpiled to CoffeeScript on the right </h4>
      <div class="col-md-6">
        <h2 class="centerYoText">Java</h2>
        <div class="editor java">public class Bicycle extends Ride implements Sweet {
  // the Bicycle class has
  // three fields
  public static int cadence;
  public int gear;
  public int speed;

  // the Bicycle class has
  // one constructor
  public Bicycle(int startCadence, int startSpeed, int startGear) {
    gear = startGear;
    cadence = startCadence;
    speed = startSpeed;
  }

  // the Bicycle class has
  // four methods
  public static void setCadence(int newValue) {
    cadence = newValue;
  }

  public void setGear(int newValue) {
    gear = newValue;
  }

  public void applyBrake(int decrement) {
    speed -= decrement;
  }

  public void speedUp(int increment) {
    speed += increment;
  }
}
        </div>
      </div>
      <div class="col-md-6">
        <h2 class="centerYoText">CoffeeScript</h2>
        <div class="editor coffee"></div>
      </div>
    </div>

    <script src="js/jquery-1.10.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/underscore-min.js"></script>
    <script src="js/ace-min.js" charset="utf-8"></script>
    <script type="text/javascript">
      java_editor = null;
      coffee_editor = null;
      transpile = function()
      {
        var ast = new Ast();
        var parsed = ast.compile('', java_editor.getValue());
        coffee_editor.setValue(parsed, -1); // also move cursor to beginning
      }

      $(document).ready(function() {
        coffee_editor = ace.edit($(".editor.coffee")[0]);
        coffee_editor.setTheme("ace/theme/monokai");
        coffee_editor.getSession().setMode("ace/mode/coffee");

        java_editor = ace.edit($(".editor.java")[0]);
        java_editor.setTheme("ace/theme/monokai");
        java_editor.getSession().setMode("ace/mode/java");
        java_editor.getSession().on('change', _.debounce(transpile, 100));

        transpile();
      });
    </script>
  </body>
</html>
