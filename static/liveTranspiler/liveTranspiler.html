<!DOCTYPE html>
<html>
  <head>
    <script type="text/x-code" id="exampleSource">
public class Bicycle {
  // the Bicycle class has
  // three fields
  public int cadence;
  public int gear;
  public int speed;
  
  // the Bicycle class has
  // one constructor
  public Bicycle(int startCadence, int startSpeed, int startGear) {
    gear = startGear;
    cadence = startCadence;
    speed = startSpeed;
  }
      
  // the Bicycle class has
  // four methods
  public void setCadence(int newValue) {
    cadence = newValue;
  }
      
  public void setGear(int newValue) {
    gear = newValue;
  }
      
  public void applyBrake(int decrement) {
    speed -= decrement;
  }
      
  public void speedUp(int increment) {
    speed += increment;
  }
}
    </script>
    <title>Live Transpiler</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- <link href="css/bootstrap-theme.min.css" rel="stylesheet"> -->
    <script src="../Ast.js"></script>
    <style type="text/css">
      .centerYoText
      {
        text-align:center;
        color:#EFEFEF;
      }
      .editor
      {
        border-radius:4px;
        border-color:#777777;
        border-width:2px;
        border-style:solid;
      }
    </style>
  </head>
  <body style="background:linear-gradient(to bottom, #333333, #222222);height:100%;background-repeat:no-repeat;background-attachment: fixed;">
  <!-- <body> -->
    <div class="row" style="padding:.5em;">
      <h4 class="centerYoText">Type or paste in Java on the left and it'll be transpiled to CoffeeScript on the right </h4>
      <div class="col-md-6">
        <h2 class="centerYoText">Java</h2>
        <div class="editor"><textarea id="sourceCodeInput"></textarea></div>
      </div>
      <div class="col-md-6">
        <h2 class="centerYoText">CoffeeScript</h2>
        <div class="editor"><textarea id="transpiledCodeInput"></textarea></div>
      </div>
    </div>

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/codemirror.js"></script>
    <link rel="stylesheet" href="css/codemirror.css">
    <link rel="stylesheet" href="css/monokai.css">
    <script src="js/mode/clike/clike.js"></script>
    <script src="js/mode/coffeescript/coffeescript.js"></script>
    <script type="text/javascript">
      sourceEditor = null;
      transpiledEditor = null;
      
      transpile = function()
      {
        var ast = new Ast();
        var parsed = ast.compile('', sourceEditor.getValue());
        transpiledEditor.setValue(parsed);
      }

      $(document).ready(function() {
        sourceEditor = CodeMirror.fromTextArea(document.getElementById("sourceCodeInput"), {
          lineNumbers: true,
          matchBrackets: true,
          theme: 'monokai',
          mode: "text/x-java"
        });
        sourceEditor.on("change", transpile);
        sourceEditor.setSize(null, '100%');
        transpiledEditor = CodeMirror.fromTextArea(document.getElementById("transpiledCodeInput"), {
          lineNumbers: true,
          readOnly: true,
          theme: 'monokai',
          mode: "text/x-coffeescript"
        });
        transpiledEditor.setSize(null, '100%');
        sourceEditor.setValue($('#exampleSource').text());
        transpile();
      });
    </script>
  </body>
</html>
